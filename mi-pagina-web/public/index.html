<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Reciclaje</title>
</head>
<body>

<h1>Gestión de Reciclaje - Participaciones</h1>

<!-- Formulario de participación con material -->
<form id="form-participacion">
  <input type="text" name="nombre" placeholder="Nombre completo" required><br>

  <select name="rol" required>
    <option value="">Selecciona rol</option>
    <option value="estudiante">Estudiante</option>
    <option value="docente">Docente</option>
    <option value="administrativo">Administrativo</option>
    <option value="directivo">Directivo</option>
  </select><br>

  <select name="material" required>
    <option value="">Tipo de material reciclado</option>
    <option value="Plástico">Plástico</option>
    <option value="Papel">Papel</option>
    <option value="Vidrio">Vidrio</option>
    <option value="Orgánico">Orgánico</option>
  </select><br>

  <input type="number" name="kilos" placeholder="Kilos reciclados" required><br>
  <input type="date" name="fecha" required><br>
  <input type="text" name="hora" placeholder="Hora (HH:MM)" pattern="^([01]\d|2[0-3]):([0-5]\d)$"><br>
  <input type="text" name="lugar" placeholder="Lugar de recolección"><br>

  <button type="submit">Registrar Participación</button>
</form>

<h3>Filtrar por Rol:</h3>
<select id="filtro-rol">
  <option value="">Todos</option>
  <option value="estudiante">Estudiante</option>
  <option value="docente">Docente</option>
  <option value="administrativo">Administrativo</option>
  <option value="directivo">Directivo</option>
</select>

<!-- Tabla única con toda la información -->
<table border="1" style="margin-top: 20px;">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Rol</th>
      <th>Material</th>
      <th>Kilos</th>
      <th>Fecha</th>
      <th>Hora</th>
      <th>Lugar</th>
    </tr>
  </thead>
  <tbody id="tabla-datos"></tbody>
</table>

<script>
  const participaciones = [];

  document.getElementById('form-participacion').addEventListener('submit', e => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(e.target));
    participaciones.push(data);
    mostrarTabla();
    e.target.reset();
  });

  document.getElementById('filtro-rol').addEventListener('change', mostrarTabla);

  function mostrarTabla() {
    const filtro = document.getElementById('filtro-rol').value;
    const tabla = document.getElementById('tabla-datos');
    const datosFiltrados = filtro ? participaciones.filter(p => p.rol === filtro) : participaciones;

    tabla.innerHTML = datosFiltrados.map(p => `
      <tr>
        <td>${p.nombre}</td>
        <td>${p.rol}</td>
        <td>${p.material}</td>
        <td>${p.kilos}</td>
        <td>${p.fecha}</td>
        <td>${p.hora || '-'}</td>
        <td>${p.lugar || '-'}</td>
      </tr>
    `).join('');
  }
</script>

</body>
</html>
